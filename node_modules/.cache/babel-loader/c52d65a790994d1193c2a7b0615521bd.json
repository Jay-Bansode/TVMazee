{"ast":null,"code":"import { MotionValueState } from '../MotionValueState.mjs';\n\nfunction createEffect(addValue) {\n  const stateCache = new WeakMap();\n  const subscriptions = [];\n  return (subject, values) => {\n    const state = stateCache.get(subject) ?? new MotionValueState();\n    stateCache.set(subject, state);\n\n    for (const key in values) {\n      const value = values[key];\n      const remove = addValue(subject, state, key, value);\n      subscriptions.push(remove);\n    }\n\n    return () => {\n      for (const cancel of subscriptions) cancel();\n    };\n  };\n}\n\nexport { createEffect };","map":{"version":3,"mappings":";;AAGM,SAAUA,YAAV,CACFC,QADE,EAMe;EAEjB,MAAMC,UAAU,GAAG,IAAIC,OAAJ,EAAnB;EACA,MAAMC,aAAa,GAAmB,EAAtC;EAEA,OAAO,CACHC,OADG,EAEHC,MAFG,KAGW;IACd,MAAMC,KAAK,GAAGL,UAAU,CAACM,GAAX,CAAeH,OAAf,KAA2B,IAAII,gBAAJ,EAAzC;IAEAP,UAAU,CAACQ,GAAX,CAAeL,OAAf,EAAwBE,KAAxB;;IAEA,KAAK,MAAMI,GAAX,IAAkBL,MAAlB,EAA0B;MACtB,MAAMM,KAAK,GAAGN,MAAM,CAACK,GAAD,CAApB;MACA,MAAME,MAAM,GAAGZ,QAAQ,CAACI,OAAD,EAAUE,KAAV,EAAiBI,GAAjB,EAAsBC,KAAtB,CAAvB;MACAR,aAAa,CAACU,IAAd,CAAmBD,MAAnB;IACH;;IAED,OAAO,MAAK;MACR,KAAK,MAAME,MAAX,IAAqBX,aAArB,EAAoCW,MAAM;IAC7C,CAFD;EAGH,CAjBD;AAkBJ","names":["createEffect","addValue","stateCache","WeakMap","subscriptions","subject","values","state","get","MotionValueState","set","key","value","remove","push","cancel"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\effects\\utils\\create-effect.ts"],"sourcesContent":["import { MotionValue } from \"../../value\"\nimport { MotionValueState } from \"../MotionValueState\"\n\nexport function createEffect<Subject extends object>(\n    addValue: (\n        subject: Subject,\n        state: MotionValueState,\n        key: string,\n        value: MotionValue\n    ) => VoidFunction\n) {\n    const stateCache = new WeakMap<Subject, MotionValueState>()\n    const subscriptions: VoidFunction[] = []\n\n    return (\n        subject: Subject,\n        values: Record<string, MotionValue>\n    ): VoidFunction => {\n        const state = stateCache.get(subject) ?? new MotionValueState()\n\n        stateCache.set(subject, state)\n\n        for (const key in values) {\n            const value = values[key]\n            const remove = addValue(subject, state, key, value)\n            subscriptions.push(remove)\n        }\n\n        return () => {\n            for (const cancel of subscriptions) cancel()\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}