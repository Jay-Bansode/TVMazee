{"ast":null,"code":"import { Feature } from 'motion-dom';\nimport { noop } from 'motion-utils';\nimport { VisualElementDragControls } from './VisualElementDragControls.mjs';\n\nclass DragGesture extends Feature {\n  constructor(node) {\n    super(node);\n    this.removeGroupControls = noop;\n    this.removeListeners = noop;\n    this.controls = new VisualElementDragControls(node);\n  }\n\n  mount() {\n    // If we've been provided a DragControls for manual control over the drag gesture,\n    // subscribe this component to it on mount.\n    const {\n      dragControls\n    } = this.node.getProps();\n\n    if (dragControls) {\n      this.removeGroupControls = dragControls.subscribe(this.controls);\n    }\n\n    this.removeListeners = this.controls.addListeners() || noop;\n  }\n\n  update() {\n    const {\n      dragControls\n    } = this.node.getProps();\n    const {\n      dragControls: prevDragControls\n    } = this.node.prevProps || {};\n\n    if (dragControls !== prevDragControls) {\n      this.removeGroupControls();\n\n      if (dragControls) {\n        this.removeGroupControls = dragControls.subscribe(this.controls);\n      }\n    }\n  }\n\n  unmount() {\n    this.removeGroupControls();\n    this.removeListeners();\n    /**\n     * In React 19, during list reorder reconciliation, components may\n     * briefly unmount and remount while the drag is still active. If we're\n     * actively dragging, we should NOT end the pan session - it will\n     * continue tracking pointer events via its window-level listeners.\n     *\n     * The pan session will be properly cleaned up when:\n     * 1. The drag ends naturally (pointerup/pointercancel)\n     * 2. The component is truly removed from the DOM\n     */\n\n    if (!this.controls.isDragging) {\n      this.controls.endPanSession();\n    }\n  }\n\n}\n\nexport { DragGesture };","map":{"version":3,"mappings":";;;;AAIM,MAAOA,WAAP,SAA2BC,OAA3B,CAA+C;EAMjDC,YAAYC,IAAZ,EAA4C;IACxC,MAAMA,IAAN;IAJJ,KAAmBC,mBAAnB,GAAgCC,IAAhC;IACA,KAAeC,eAAf,GAA4BD,IAA5B;IAII,KAAKE,QAAL,GAAgB,IAAIC,yBAAJ,CAA8BL,IAA9B,CAAhB;EACH;;EAEDM,KAAK;;;IAGD,MAAM;MAAEC;IAAF,IAAmB,KAAKP,IAAL,CAAUQ,QAAV,EAAzB;;IAEA,IAAID,YAAJ,EAAkB;MACd,KAAKN,mBAAL,GAA2BM,YAAY,CAACE,SAAb,CAAuB,KAAKL,QAA5B,CAA3B;IACH;;IAED,KAAKD,eAAL,GAAuB,KAAKC,QAAL,CAAcM,YAAd,MAAgCR,IAAvD;EACH;;EAEDS,MAAM;IACF,MAAM;MAAEJ;IAAF,IAAmB,KAAKP,IAAL,CAAUQ,QAAV,EAAzB;IACA,MAAM;MAAED,YAAY,EAAEK;IAAhB,IAAqC,KAAKZ,IAAL,CAAUa,SAAV,IAAuB,EAAlE;;IAEA,IAAIN,YAAY,KAAKK,gBAArB,EAAuC;MACnC,KAAKX,mBAAL;;MACA,IAAIM,YAAJ,EAAkB;QACd,KAAKN,mBAAL,GAA2BM,YAAY,CAACE,SAAb,CAAuB,KAAKL,QAA5B,CAA3B;MACH;IACJ;EACJ;;EAEDU,OAAO;IACH,KAAKb,mBAAL;IACA,KAAKE,eAAL;IACA;;;;;;;;;AASG;;IACH,IAAI,CAAC,KAAKC,QAAL,CAAcW,UAAnB,EAA+B;MAC3B,KAAKX,QAAL,CAAcY,aAAd;IACH;EACJ;;AAnDgD","names":["DragGesture","Feature","constructor","node","removeGroupControls","noop","removeListeners","controls","VisualElementDragControls","mount","dragControls","getProps","subscribe","addListeners","update","prevDragControls","prevProps","unmount","isDragging","endPanSession"],"sources":["C:\\Projects\\TVMazee\\node_modules\\framer-motion\\src\\gestures\\drag\\index.ts"],"sourcesContent":["import { Feature, type VisualElement } from \"motion-dom\"\nimport { noop } from \"motion-utils\"\nimport { VisualElementDragControls } from \"./VisualElementDragControls\"\n\nexport class DragGesture extends Feature<HTMLElement> {\n    controls: VisualElementDragControls\n\n    removeGroupControls: Function = noop\n    removeListeners: Function = noop\n\n    constructor(node: VisualElement<HTMLElement>) {\n        super(node)\n        this.controls = new VisualElementDragControls(node)\n    }\n\n    mount() {\n        // If we've been provided a DragControls for manual control over the drag gesture,\n        // subscribe this component to it on mount.\n        const { dragControls } = this.node.getProps()\n\n        if (dragControls) {\n            this.removeGroupControls = dragControls.subscribe(this.controls)\n        }\n\n        this.removeListeners = this.controls.addListeners() || noop\n    }\n\n    update() {\n        const { dragControls } = this.node.getProps()\n        const { dragControls: prevDragControls } = this.node.prevProps || {}\n\n        if (dragControls !== prevDragControls) {\n            this.removeGroupControls()\n            if (dragControls) {\n                this.removeGroupControls = dragControls.subscribe(this.controls)\n            }\n        }\n    }\n\n    unmount() {\n        this.removeGroupControls()\n        this.removeListeners()\n        /**\n         * In React 19, during list reorder reconciliation, components may\n         * briefly unmount and remount while the drag is still active. If we're\n         * actively dragging, we should NOT end the pan session - it will\n         * continue tracking pointer events via its window-level listeners.\n         *\n         * The pan session will be properly cleaned up when:\n         * 1. The drag ends naturally (pointerup/pointercancel)\n         * 2. The component is truly removed from the DOM\n         */\n        if (!this.controls.isDragging) {\n            this.controls.endPanSession()\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}