{"ast":null,"code":"import { time } from '../frameloop/sync-time.mjs';\nimport { secondsToMilliseconds } from 'motion-utils';\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\n/**\n * Timeout defined in ms\n */\n\nfunction delay(callback, timeout) {\n  const start = time.now();\n\n  const checkElapsed = _ref => {\n    let {\n      timestamp\n    } = _ref;\n    const elapsed = timestamp - start;\n\n    if (elapsed >= timeout) {\n      cancelFrame(checkElapsed);\n      callback(elapsed - timeout);\n    }\n  };\n\n  frame.setup(checkElapsed, true);\n  return () => cancelFrame(checkElapsed);\n}\n\nfunction delayInSeconds(callback, timeout) {\n  return delay(callback, secondsToMilliseconds(timeout));\n}\n\nexport { delay, delayInSeconds };","map":{"version":3,"mappings":";;;AAOA;;AAEG;;AACa,eAAMA,QAAN,EAAiCC,OAAjC,EAAgD;EAC5D,MAAMC,KAAK,GAAGC,IAAI,CAACC,GAAL,EAAd;;EAEA,MAAMC,YAAY,GAAG,QAA6B;IAAA,IAA5B;MAAEC;IAAF,CAA4B;IAC9C,MAAMC,OAAO,GAAGD,SAAS,GAAGJ,KAA5B;;IAEA,IAAIK,OAAO,IAAIN,OAAf,EAAwB;MACpBO,WAAW,CAACH,YAAD,CAAX;MACAL,QAAQ,CAACO,OAAO,GAAGN,OAAX,CAAR;IACH;EACJ,CAPD;;EASAQ,KAAK,CAACC,KAAN,CAAYL,YAAZ,EAA0B,IAA1B;EAEA,OAAO,MAAMG,WAAW,CAACH,YAAD,CAAxB;AACH;;AAEe,wBAAeL,QAAf,EAA0CC,OAA1C,EAAyD;EACrE,OAAOU,KAAK,CAACX,QAAD,EAAWY,qBAAqB,CAACX,OAAD,CAAhC,CAAZ;AACJ","names":["callback","timeout","start","time","now","checkElapsed","timestamp","elapsed","cancelFrame","frame","setup","delay","secondsToMilliseconds"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\utils\\delay.ts"],"sourcesContent":["import { cancelFrame, frame } from \"../frameloop\"\nimport { time } from \"../frameloop/sync-time\"\nimport type { FrameData } from \"../frameloop/types\"\nimport { secondsToMilliseconds } from \"motion-utils\"\n\nexport type DelayedFunction = (overshoot: number) => void\n\n/**\n * Timeout defined in ms\n */\nexport function delay(callback: DelayedFunction, timeout: number) {\n    const start = time.now()\n\n    const checkElapsed = ({ timestamp }: FrameData) => {\n        const elapsed = timestamp - start\n\n        if (elapsed >= timeout) {\n            cancelFrame(checkElapsed)\n            callback(elapsed - timeout)\n        }\n    }\n\n    frame.setup(checkElapsed, true)\n\n    return () => cancelFrame(checkElapsed)\n}\n\nexport function delayInSeconds(callback: DelayedFunction, timeout: number) {\n    return delay(callback, secondsToMilliseconds(timeout))\n}\n"]},"metadata":{},"sourceType":"module"}