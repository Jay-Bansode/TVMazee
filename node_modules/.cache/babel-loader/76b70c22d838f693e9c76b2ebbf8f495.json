{"ast":null,"code":"import { isPressing } from './state.mjs';\n/**\n * Filter out events that are not \"Enter\" keys.\n */\n\nfunction filterEvents(callback) {\n  return event => {\n    if (event.key !== \"Enter\") return;\n    callback(event);\n  };\n}\n\nfunction firePointerEvent(target, type) {\n  target.dispatchEvent(new PointerEvent(\"pointer\" + type, {\n    isPrimary: true,\n    bubbles: true\n  }));\n}\n\nconst enableKeyboardPress = (focusEvent, eventOptions) => {\n  const element = focusEvent.currentTarget;\n  if (!element) return;\n  const handleKeydown = filterEvents(() => {\n    if (isPressing.has(element)) return;\n    firePointerEvent(element, \"down\");\n    const handleKeyup = filterEvents(() => {\n      firePointerEvent(element, \"up\");\n    });\n\n    const handleBlur = () => firePointerEvent(element, \"cancel\");\n\n    element.addEventListener(\"keyup\", handleKeyup, eventOptions);\n    element.addEventListener(\"blur\", handleBlur, eventOptions);\n  });\n  element.addEventListener(\"keydown\", handleKeydown, eventOptions);\n  /**\n   * Add an event listener that fires on blur to remove the keydown events.\n   */\n\n  element.addEventListener(\"blur\", () => element.removeEventListener(\"keydown\", handleKeydown), eventOptions);\n};\n\nexport { enableKeyboardPress };","map":{"version":3,"mappings":";AAEA;;AAEG;;AACH,SAASA,YAAT,CAAsBC,QAAtB,EAA8D;EAC1D,OAAQC,KAAD,IAAyB;IAC5B,IAAIA,KAAK,CAACC,GAAN,KAAc,OAAlB,EAA2B;IAC3BF,QAAQ,CAACC,KAAD,CAAR;EACH,CAHD;AAIH;;AAED,SAASE,gBAAT,CAA0BC,MAA1B,EAA+CC,IAA/C,EAA6E;EACzED,MAAM,CAACE,aAAP,CACI,IAAIC,YAAJ,CAAiB,YAAYF,IAA7B,EAAmC;IAAEG,SAAS,EAAE,IAAb;IAAmBC,OAAO,EAAE;EAA5B,CAAnC,CADJ;AAGH;;MAEYC,mBAAmB,GAAG,CAC/BC,UAD+B,EAE/BC,YAF+B,KAG/B;EACA,MAAMC,OAAO,GAAGF,UAAU,CAACG,aAA3B;EACA,IAAI,CAACD,OAAL,EAAc;EAEd,MAAME,aAAa,GAAGhB,YAAY,CAAC,MAAK;IACpC,IAAIiB,UAAU,CAACC,GAAX,CAAeJ,OAAf,CAAJ,EAA6B;IAE7BV,gBAAgB,CAACU,OAAD,EAAU,MAAV,CAAhB;IAEA,MAAMK,WAAW,GAAGnB,YAAY,CAAC,MAAK;MAClCI,gBAAgB,CAACU,OAAD,EAAU,IAAV,CAAhB;IACH,CAF+B,CAAhC;;IAIA,MAAMM,UAAU,GAAG,MAAMhB,gBAAgB,CAACU,OAAD,EAAU,QAAV,CAAzC;;IAEAA,OAAO,CAACO,gBAAR,CAAyB,OAAzB,EAAkCF,WAAlC,EAA+CN,YAA/C;IACAC,OAAO,CAACO,gBAAR,CAAyB,MAAzB,EAAiCD,UAAjC,EAA6CP,YAA7C;EACH,CAbiC,CAAlC;EAeAC,OAAO,CAACO,gBAAR,CAAyB,SAAzB,EAAoCL,aAApC,EAAmDH,YAAnD;EAEA;;AAEG;;EACHC,OAAO,CAACO,gBAAR,CACI,MADJ,EAEI,MAAMP,OAAO,CAACQ,mBAAR,CAA4B,SAA5B,EAAuCN,aAAvC,CAFV,EAGIH,YAHJ;AAKJ","names":["filterEvents","callback","event","key","firePointerEvent","target","type","dispatchEvent","PointerEvent","isPrimary","bubbles","enableKeyboardPress","focusEvent","eventOptions","element","currentTarget","handleKeydown","isPressing","has","handleKeyup","handleBlur","addEventListener","removeEventListener"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\gestures\\press\\utils\\keyboard.ts"],"sourcesContent":["import { isPressing } from \"./state\"\n\n/**\n * Filter out events that are not \"Enter\" keys.\n */\nfunction filterEvents(callback: (event: KeyboardEvent) => void) {\n    return (event: KeyboardEvent) => {\n        if (event.key !== \"Enter\") return\n        callback(event)\n    }\n}\n\nfunction firePointerEvent(target: EventTarget, type: \"down\" | \"up\" | \"cancel\") {\n    target.dispatchEvent(\n        new PointerEvent(\"pointer\" + type, { isPrimary: true, bubbles: true })\n    )\n}\n\nexport const enableKeyboardPress = (\n    focusEvent: FocusEvent,\n    eventOptions: AddEventListenerOptions\n) => {\n    const element = focusEvent.currentTarget as HTMLElement\n    if (!element) return\n\n    const handleKeydown = filterEvents(() => {\n        if (isPressing.has(element)) return\n\n        firePointerEvent(element, \"down\")\n\n        const handleKeyup = filterEvents(() => {\n            firePointerEvent(element, \"up\")\n        })\n\n        const handleBlur = () => firePointerEvent(element, \"cancel\")\n\n        element.addEventListener(\"keyup\", handleKeyup, eventOptions)\n        element.addEventListener(\"blur\", handleBlur, eventOptions)\n    })\n\n    element.addEventListener(\"keydown\", handleKeydown, eventOptions)\n\n    /**\n     * Add an event listener that fires on blur to remove the keydown events.\n     */\n    element.addEventListener(\n        \"blur\",\n        () => element.removeEventListener(\"keydown\", handleKeydown),\n        eventOptions\n    )\n}\n"]},"metadata":{},"sourceType":"module"}