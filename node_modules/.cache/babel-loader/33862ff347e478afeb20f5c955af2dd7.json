{"ast":null,"code":"import { collectMotionValues, motionValue } from './index.mjs';\nimport { subscribeValue } from './subscribe-value.mjs';\n/**\n * Create a `MotionValue` that transforms the output of other `MotionValue`s by\n * passing their latest values through a transform function.\n *\n * Whenever a `MotionValue` referred to in the provided function is updated,\n * it will be re-evaluated.\n *\n * ```jsx\n * const x = motionValue(0)\n * const y = transformValue(() => x.get() * 2) // double x\n * ```\n *\n * @param transformer - A transform function. This function must be pure with no side-effects or conditional statements.\n * @returns `MotionValue`\n *\n * @public\n */\n\nfunction transformValue(transform) {\n  const collectedValues = [];\n  /**\n   * Open session of collectMotionValues. Any MotionValue that calls get()\n   * inside transform will be saved into this array.\n   */\n\n  collectMotionValues.current = collectedValues;\n  const initialValue = transform();\n  collectMotionValues.current = undefined;\n  const value = motionValue(initialValue);\n  subscribeValue(collectedValues, value, transform);\n  return value;\n}\n\nexport { transformValue };","map":{"version":3,"mappings":";;AAUA;;;;;;;;;;;;;;;;AAgBG;;AACG,SAAUA,cAAV,CAA4BC,SAA5B,EAA8C;EAChD,MAAMC,eAAe,GAAkB,EAAvC;EAEA;;;AAGG;;EACHC,mBAAmB,CAACC,OAApB,GAA8BF,eAA9B;EACA,MAAMG,YAAY,GAAGJ,SAAS,EAA9B;EACAE,mBAAmB,CAACC,OAApB,GAA8BE,SAA9B;EAEA,MAAMC,KAAK,GAAGC,WAAW,CAACH,YAAD,CAAzB;EAEAI,cAAc,CAACP,eAAD,EAAkBK,KAAlB,EAAyBN,SAAzB,CAAd;EAEA,OAAOM,KAAP;AACJ","names":["transformValue","transform","collectedValues","collectMotionValues","current","initialValue","undefined","value","motionValue","subscribeValue"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\value\\transform-value.ts"],"sourcesContent":["import { MotionValue, collectMotionValues, motionValue } from \".\"\nimport { subscribeValue } from \"./subscribe-value\"\n\nexport type TransformInputRange = number[]\nexport type SingleTransformer<I, O> = (input: I) => O\nexport type MultiTransformer<I, O> = (input: I[]) => O\nexport type ValueTransformer<I, O> =\n    | SingleTransformer<I, O>\n    | MultiTransformer<I, O>\n\n/**\n * Create a `MotionValue` that transforms the output of other `MotionValue`s by\n * passing their latest values through a transform function.\n *\n * Whenever a `MotionValue` referred to in the provided function is updated,\n * it will be re-evaluated.\n *\n * ```jsx\n * const x = motionValue(0)\n * const y = transformValue(() => x.get() * 2) // double x\n * ```\n *\n * @param transformer - A transform function. This function must be pure with no side-effects or conditional statements.\n * @returns `MotionValue`\n *\n * @public\n */\nexport function transformValue<O>(transform: () => O): MotionValue<O> {\n    const collectedValues: MotionValue[] = []\n\n    /**\n     * Open session of collectMotionValues. Any MotionValue that calls get()\n     * inside transform will be saved into this array.\n     */\n    collectMotionValues.current = collectedValues\n    const initialValue = transform()\n    collectMotionValues.current = undefined\n\n    const value = motionValue(initialValue)\n\n    subscribeValue(collectedValues, value, transform)\n\n    return value\n}\n"]},"metadata":{},"sourceType":"module"}