{"ast":null,"code":"import { Feature, frame } from 'motion-dom';\nimport { noop } from 'motion-utils';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { PanSession } from './PanSession.mjs';\n\nconst asyncHandler = handler => (event, info) => {\n  if (handler) {\n    frame.update(() => handler(event, info), false, true);\n  }\n};\n\nclass PanGesture extends Feature {\n  constructor() {\n    super(...arguments);\n    this.removePointerDownListener = noop;\n  }\n\n  onPointerDown(pointerDownEvent) {\n    this.session = new PanSession(pointerDownEvent, this.createPanHandlers(), {\n      transformPagePoint: this.node.getTransformPagePoint(),\n      contextWindow: getContextWindow(this.node)\n    });\n  }\n\n  createPanHandlers() {\n    const {\n      onPanSessionStart,\n      onPanStart,\n      onPan,\n      onPanEnd\n    } = this.node.getProps();\n    return {\n      onSessionStart: asyncHandler(onPanSessionStart),\n      onStart: asyncHandler(onPanStart),\n      onMove: asyncHandler(onPan),\n      onEnd: (event, info) => {\n        delete this.session;\n\n        if (onPanEnd) {\n          frame.postRender(() => onPanEnd(event, info));\n        }\n      }\n    };\n  }\n\n  mount() {\n    this.removePointerDownListener = addPointerEvent(this.node.current, \"pointerdown\", event => this.onPointerDown(event));\n  }\n\n  update() {\n    this.session && this.session.updateHandlers(this.createPanHandlers());\n  }\n\n  unmount() {\n    this.removePointerDownListener();\n    this.session && this.session.end();\n  }\n\n}\n\nexport { PanGesture };","map":{"version":3,"mappings":";;;;;;AAOA,MAAMA,YAAY,GACbC,OAAD,IAA+B,CAACC,KAAD,EAAsBC,IAAtB,KAAuC;EAClE,IAAIF,OAAJ,EAAa;IACTG,KAAK,CAACC,MAAN,CAAa,MAAMJ,OAAO,CAACC,KAAD,EAAQC,IAAR,CAA1B,EAAyC,KAAzC,EAAgD,IAAhD;EACH;AACJ,CALL;;AAOM,MAAOG,UAAP,SAA0BC,OAA1B,CAA0C;EAAhDC;;IAGY,KAAyBC,yBAAzB,GAAsCC,IAAtC;EA8CX;;EA5CGC,aAAa,CAACC,gBAAD,EAA+B;IACxC,KAAKC,OAAL,GAAe,IAAIC,UAAJ,CACXF,gBADW,EAEX,KAAKG,iBAAL,EAFW,EAGX;MACIC,kBAAkB,EAAE,KAAKC,IAAL,CAAUC,qBAAV,EADxB;MAEIC,aAAa,EAAEC,gBAAgB,CAAC,KAAKH,IAAN;IAFnC,CAHW,CAAf;EAQH;;EAEDF,iBAAiB;IACb,MAAM;MAAEM,iBAAF;MAAqBC,UAArB;MAAiCC,KAAjC;MAAwCC;IAAxC,IACF,KAAKP,IAAL,CAAUQ,QAAV,EADJ;IAGA,OAAO;MACHC,cAAc,EAAE1B,YAAY,CAACqB,iBAAD,CADzB;MAEHM,OAAO,EAAE3B,YAAY,CAACsB,UAAD,CAFlB;MAGHM,MAAM,EAAE5B,YAAY,CAACuB,KAAD,CAHjB;MAIHM,KAAK,EAAE,CAAC3B,KAAD,EAAsBC,IAAtB,KAAuC;QAC1C,OAAO,KAAKU,OAAZ;;QACA,IAAIW,QAAJ,EAAc;UACVpB,KAAK,CAAC0B,UAAN,CAAiB,MAAMN,QAAQ,CAACtB,KAAD,EAAQC,IAAR,CAA/B;QACH;MACJ;IATE,CAAP;EAWH;;EAED4B,KAAK;IACD,KAAKtB,yBAAL,GAAiCuB,eAAe,CAC5C,KAAKf,IAAL,CAAUgB,OADkC,EAE5C,aAF4C,EAG3C/B,KAAD,IAAyB,KAAKS,aAAL,CAAmBT,KAAnB,CAHmB,CAAhD;EAKH;;EAEDG,MAAM;IACF,KAAKQ,OAAL,IAAgB,KAAKA,OAAL,CAAaqB,cAAb,CAA4B,KAAKnB,iBAAL,EAA5B,CAAhB;EACH;;EAEDoB,OAAO;IACH,KAAK1B,yBAAL;IACA,KAAKI,OAAL,IAAgB,KAAKA,OAAL,CAAauB,GAAb,EAAhB;EACH;;AAhD2C","names":["asyncHandler","handler","event","info","frame","update","PanGesture","Feature","constructor","removePointerDownListener","noop","onPointerDown","pointerDownEvent","session","PanSession","createPanHandlers","transformPagePoint","node","getTransformPagePoint","contextWindow","getContextWindow","onPanSessionStart","onPanStart","onPan","onPanEnd","getProps","onSessionStart","onStart","onMove","onEnd","postRender","mount","addPointerEvent","current","updateHandlers","unmount","end"],"sources":["C:\\Projects\\TVMazee\\node_modules\\framer-motion\\src\\gestures\\pan\\index.ts"],"sourcesContent":["import { Feature, frame, type PanInfo } from \"motion-dom\"\nimport { noop } from \"motion-utils\"\nimport { addPointerEvent } from \"../../events/add-pointer-event\"\nimport { getContextWindow } from \"../../utils/get-context-window\"\nimport { PanSession } from \"./PanSession\"\n\ntype PanEventHandler = (event: PointerEvent, info: PanInfo) => void\nconst asyncHandler =\n    (handler?: PanEventHandler) => (event: PointerEvent, info: PanInfo) => {\n        if (handler) {\n            frame.update(() => handler(event, info), false, true)\n        }\n    }\n\nexport class PanGesture extends Feature<Element> {\n    private session?: PanSession\n\n    private removePointerDownListener: Function = noop\n\n    onPointerDown(pointerDownEvent: PointerEvent) {\n        this.session = new PanSession(\n            pointerDownEvent,\n            this.createPanHandlers(),\n            {\n                transformPagePoint: this.node.getTransformPagePoint(),\n                contextWindow: getContextWindow(this.node),\n            }\n        )\n    }\n\n    createPanHandlers() {\n        const { onPanSessionStart, onPanStart, onPan, onPanEnd } =\n            this.node.getProps()\n\n        return {\n            onSessionStart: asyncHandler(onPanSessionStart),\n            onStart: asyncHandler(onPanStart),\n            onMove: asyncHandler(onPan),\n            onEnd: (event: PointerEvent, info: PanInfo) => {\n                delete this.session\n                if (onPanEnd) {\n                    frame.postRender(() => onPanEnd(event, info))\n                }\n            },\n        }\n    }\n\n    mount() {\n        this.removePointerDownListener = addPointerEvent(\n            this.node.current!,\n            \"pointerdown\",\n            (event: PointerEvent) => this.onPointerDown(event)\n        )\n    }\n\n    update() {\n        this.session && this.session.updateHandlers(this.createPanHandlers())\n    }\n\n    unmount() {\n        this.removePointerDownListener()\n        this.session && this.session.end()\n    }\n}\n"]},"metadata":{},"sourceType":"module"}