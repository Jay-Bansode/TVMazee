{"ast":null,"code":"import { MotionGlobalConfig } from 'motion-utils';\nimport { frameData } from './frame.mjs';\nlet now;\n\nfunction clearTime() {\n  now = undefined;\n}\n/**\n * An eventloop-synchronous alternative to performance.now().\n *\n * Ensures that time measurements remain consistent within a synchronous context.\n * Usually calling performance.now() twice within the same synchronous context\n * will return different values which isn't useful for animations when we're usually\n * trying to sync animations to the same frame.\n */\n\n\nconst time = {\n  now: () => {\n    if (now === undefined) {\n      time.set(frameData.isProcessing || MotionGlobalConfig.useManualTiming ? frameData.timestamp : performance.now());\n    }\n\n    return now;\n  },\n  set: newTime => {\n    now = newTime;\n    queueMicrotask(clearTime);\n  }\n};\nexport { time };","map":{"version":3,"mappings":";;AAGA,IAAIA,GAAJ;;AAEA,SAASC,SAAT,GAAkB;EACdD,GAAG,GAAGE,SAAN;AACH;AAED;;;;;;;AAOG;;;AACU,UAAI,GAAG;EAChBF,GAAG,EAAE,MAAa;IACd,IAAIA,GAAG,KAAKE,SAAZ,EAAuB;MACnBC,IAAI,CAACC,GAAL,CACIC,SAAS,CAACC,YAAV,IAA0BC,kBAAkB,CAACC,eAA7C,GACMH,SAAS,CAACI,SADhB,GAEMC,WAAW,CAACV,GAAZ,EAHV;IAKH;;IAED,OAAOA,GAAP;EACH,CAXe;EAYhBI,GAAG,EAAGO,OAAD,IAAoB;IACrBX,GAAG,GAAGW,OAAN;IACAC,cAAc,CAACX,SAAD,CAAd;EACH;AAfe,CAAP","names":["now","clearTime","undefined","time","set","frameData","isProcessing","MotionGlobalConfig","useManualTiming","timestamp","performance","newTime","queueMicrotask"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\frameloop\\sync-time.ts"],"sourcesContent":["import { MotionGlobalConfig } from \"motion-utils\"\nimport { frameData } from \"./frame\"\n\nlet now: number | undefined\n\nfunction clearTime() {\n    now = undefined\n}\n\n/**\n * An eventloop-synchronous alternative to performance.now().\n *\n * Ensures that time measurements remain consistent within a synchronous context.\n * Usually calling performance.now() twice within the same synchronous context\n * will return different values which isn't useful for animations when we're usually\n * trying to sync animations to the same frame.\n */\nexport const time = {\n    now: (): number => {\n        if (now === undefined) {\n            time.set(\n                frameData.isProcessing || MotionGlobalConfig.useManualTiming\n                    ? frameData.timestamp\n                    : performance.now()\n            )\n        }\n\n        return now!\n    },\n    set: (newTime: number) => {\n        now = newTime\n        queueMicrotask(clearTime)\n    },\n}\n"]},"metadata":{},"sourceType":"module"}