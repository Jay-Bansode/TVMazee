{"ast":null,"code":"import { noop } from 'motion-utils';\nimport { addToQueue } from './queue.mjs';\n\nclass ViewTransitionBuilder {\n  constructor(update) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.currentSubject = \"root\";\n    this.targets = new Map();\n    this.notifyReady = noop;\n    this.readyPromise = new Promise(resolve => {\n      this.notifyReady = resolve;\n    });\n    this.update = update;\n    this.options = {\n      interrupt: \"wait\",\n      ...options\n    };\n    addToQueue(this);\n  }\n\n  get(subject) {\n    this.currentSubject = subject;\n    return this;\n  }\n\n  layout(keyframes, options) {\n    this.updateTarget(\"layout\", keyframes, options);\n    return this;\n  }\n\n  new(keyframes, options) {\n    this.updateTarget(\"new\", keyframes, options);\n    return this;\n  }\n\n  old(keyframes, options) {\n    this.updateTarget(\"old\", keyframes, options);\n    return this;\n  }\n\n  enter(keyframes, options) {\n    this.updateTarget(\"enter\", keyframes, options);\n    return this;\n  }\n\n  exit(keyframes, options) {\n    this.updateTarget(\"exit\", keyframes, options);\n    return this;\n  }\n\n  crossfade(options) {\n    this.updateTarget(\"enter\", {\n      opacity: 1\n    }, options);\n    this.updateTarget(\"exit\", {\n      opacity: 0\n    }, options);\n    return this;\n  }\n\n  updateTarget(target, keyframes) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const {\n      currentSubject,\n      targets\n    } = this;\n\n    if (!targets.has(currentSubject)) {\n      targets.set(currentSubject, {});\n    }\n\n    const targetData = targets.get(currentSubject);\n    targetData[target] = {\n      keyframes,\n      options\n    };\n  }\n\n  then(resolve, reject) {\n    return this.readyPromise.then(resolve, reject);\n  }\n\n}\n\nfunction animateView(update) {\n  let defaultOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new ViewTransitionBuilder(update, defaultOptions);\n}\n\nexport { ViewTransitionBuilder, animateView };","map":{"version":3,"mappings":";;;MAWaA,sBAAqB;EAe9BC,WACI,SACmC;IAAA,IAAnCC,OAAmC,uEAAF,EAAE;IAhB/B,KAAcC,cAAd,GAAiD,MAAjD;IAER,eAAU,IAAIC,GAAJ,EAAV;IAMA,KAAWC,WAAX,GAA+CC,IAA/C;IAEQ,oBAAe,IAAIC,OAAJ,CAA6BC,OAAD,IAAY;MAC3D,KAAKH,WAAL,GAAmBG,OAAnB;IACH,CAFsB,CAAf;IAQJ,KAAKC,MAAL,GAAcA,MAAd;IACA,KAAKP,OAAL,GAAe;MACXQ,SAAS,EAAE,MADA;MAEX,GAAGR;IAFQ,CAAf;IAIAS,UAAU,CAAC,IAAD,CAAV;EACH;;EAEDC,GAAG,CAACC,OAAD,EAAwC;IACvC,KAAKV,cAAL,GAAsBU,OAAtB;IAEA,OAAO,IAAP;EACH;;EAEDC,MAAM,CAACC,SAAD,EAAoCb,OAApC,EAA8D;IAChE,KAAKc,YAAL,CAAkB,QAAlB,EAA4BD,SAA5B,EAAuCb,OAAvC;IAEA,OAAO,IAAP;EACH;;EAEDe,GAAG,CAACF,SAAD,EAAoCb,OAApC,EAA8D;IAC7D,KAAKc,YAAL,CAAkB,KAAlB,EAAyBD,SAAzB,EAAoCb,OAApC;IAEA,OAAO,IAAP;EACH;;EAEDgB,GAAG,CAACH,SAAD,EAAoCb,OAApC,EAA8D;IAC7D,KAAKc,YAAL,CAAkB,KAAlB,EAAyBD,SAAzB,EAAoCb,OAApC;IAEA,OAAO,IAAP;EACH;;EAEDiB,KAAK,CAACJ,SAAD,EAAoCb,OAApC,EAA8D;IAC/D,KAAKc,YAAL,CAAkB,OAAlB,EAA2BD,SAA3B,EAAsCb,OAAtC;IAEA,OAAO,IAAP;EACH;;EAEDkB,IAAI,CAACL,SAAD,EAAoCb,OAApC,EAA8D;IAC9D,KAAKc,YAAL,CAAkB,MAAlB,EAA0BD,SAA1B,EAAqCb,OAArC;IAEA,OAAO,IAAP;EACH;;EAEDmB,SAAS,CAACnB,OAAD,EAA2B;IAChC,KAAKc,YAAL,CAAkB,OAAlB,EAA2B;MAAEM,OAAO,EAAE;IAAX,CAA3B,EAA2CpB,OAA3C;IACA,KAAKc,YAAL,CAAkB,MAAlB,EAA0B;MAAEM,OAAO,EAAE;IAAX,CAA1B,EAA0CpB,OAA1C;IAEA,OAAO,IAAP;EACH;;EAEDc,YAAY,CACRO,MADQ,EAERR,SAFQ,EAGsB;IAAA,IAA9Bb,OAA8B,uEAAF,EAAE;IAE9B,MAAM;MAAEC,cAAF;MAAkBqB;IAAlB,IAA8B,IAApC;;IAEA,IAAI,CAACA,OAAO,CAACC,GAAR,CAAYtB,cAAZ,CAAL,EAAkC;MAC9BqB,OAAO,CAACE,GAAR,CAAYvB,cAAZ,EAA4B,EAA5B;IACH;;IAED,MAAMwB,UAAU,GAAGH,OAAO,CAACZ,GAAR,CAAYT,cAAZ,CAAnB;IAEAwB,UAAU,CAACJ,MAAD,CAAV,GAAqB;MAAER,SAAF;MAAab;IAAb,CAArB;EACH;;EAED0B,IAAI,CAACpB,OAAD,EAAsBqB,MAAtB,EAAyC;IACzC,OAAO,KAAKC,YAAL,CAAkBF,IAAlB,CAAuBpB,OAAvB,EAAgCqB,MAAhC,CAAP;EACH;;AAxF6B;;SA2FlBE,YACZtB,QAC0C;EAAA,IAA1CuB,cAA0C,uEAAF,EAAE;EAE1C,OAAO,IAAIhC,qBAAJ,CAA0BS,MAA1B,EAAkCuB,cAAlC,CAAP;AACJ","names":["ViewTransitionBuilder","constructor","options","currentSubject","Map","notifyReady","noop","Promise","resolve","update","interrupt","addToQueue","get","subject","layout","keyframes","updateTarget","new","old","enter","exit","crossfade","opacity","target","targets","has","set","targetData","then","reject","readyPromise","animateView","defaultOptions"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\view\\index.ts"],"sourcesContent":["import { noop } from \"motion-utils\"\nimport type { GroupAnimation } from \"../animation/GroupAnimation\"\nimport { AnimationOptions, DOMKeyframesDefinition } from \"../animation/types\"\nimport { addToQueue } from \"./queue\"\nimport {\n    ViewTransitionOptions,\n    ViewTransitionTarget,\n    ViewTransitionTargetDefinition,\n} from \"./types\"\nimport \"./types.global\"\n\nexport class ViewTransitionBuilder {\n    private currentSubject: ViewTransitionTargetDefinition = \"root\"\n\n    targets = new Map<ViewTransitionTargetDefinition, ViewTransitionTarget>()\n\n    update: () => void | Promise<void>\n\n    options: ViewTransitionOptions\n\n    notifyReady: (value: GroupAnimation) => void = noop\n\n    private readyPromise = new Promise<GroupAnimation>((resolve) => {\n        this.notifyReady = resolve\n    })\n\n    constructor(\n        update: () => void | Promise<void>,\n        options: ViewTransitionOptions = {}\n    ) {\n        this.update = update\n        this.options = {\n            interrupt: \"wait\",\n            ...options,\n        }\n        addToQueue(this)\n    }\n\n    get(subject: ViewTransitionTargetDefinition) {\n        this.currentSubject = subject\n\n        return this\n    }\n\n    layout(keyframes: DOMKeyframesDefinition, options?: AnimationOptions) {\n        this.updateTarget(\"layout\", keyframes, options)\n\n        return this\n    }\n\n    new(keyframes: DOMKeyframesDefinition, options?: AnimationOptions) {\n        this.updateTarget(\"new\", keyframes, options)\n\n        return this\n    }\n\n    old(keyframes: DOMKeyframesDefinition, options?: AnimationOptions) {\n        this.updateTarget(\"old\", keyframes, options)\n\n        return this\n    }\n\n    enter(keyframes: DOMKeyframesDefinition, options?: AnimationOptions) {\n        this.updateTarget(\"enter\", keyframes, options)\n\n        return this\n    }\n\n    exit(keyframes: DOMKeyframesDefinition, options?: AnimationOptions) {\n        this.updateTarget(\"exit\", keyframes, options)\n\n        return this\n    }\n\n    crossfade(options?: AnimationOptions) {\n        this.updateTarget(\"enter\", { opacity: 1 }, options)\n        this.updateTarget(\"exit\", { opacity: 0 }, options)\n\n        return this\n    }\n\n    updateTarget(\n        target: \"enter\" | \"exit\" | \"layout\" | \"new\" | \"old\",\n        keyframes: DOMKeyframesDefinition,\n        options: AnimationOptions = {}\n    ) {\n        const { currentSubject, targets } = this\n\n        if (!targets.has(currentSubject)) {\n            targets.set(currentSubject, {})\n        }\n\n        const targetData = targets.get(currentSubject)!\n\n        targetData[target] = { keyframes, options }\n    }\n\n    then(resolve: () => void, reject?: () => void) {\n        return this.readyPromise.then(resolve, reject)\n    }\n}\n\nexport function animateView(\n    update: () => void | Promise<void>,\n    defaultOptions: ViewTransitionOptions = {}\n) {\n    return new ViewTransitionBuilder(update, defaultOptions)\n}\n"]},"metadata":{},"sourceType":"module"}