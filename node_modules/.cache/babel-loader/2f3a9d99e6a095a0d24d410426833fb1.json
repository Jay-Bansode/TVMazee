{"ast":null,"code":"import { isCSSVariableName } from '../../animation/utils/is-css-variable.mjs';\nimport { transformProps } from '../utils/keys-transform.mjs';\nimport { defaultTransformValue, readTransformValue } from '../dom/parse-transform.mjs';\nimport { measureViewportBox } from '../../projection/utils/measure.mjs';\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { renderHTML } from './utils/render.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\n\nfunction getComputedStyle(element) {\n  return window.getComputedStyle(element);\n}\n\nclass HTMLVisualElement extends DOMVisualElement {\n  constructor() {\n    super(...arguments);\n    this.type = \"html\";\n    this.renderInstance = renderHTML;\n  }\n\n  readValueFromInstance(instance, key) {\n    if (transformProps.has(key)) {\n      return this.projection?.isProjecting ? defaultTransformValue(key) : readTransformValue(instance, key);\n    } else {\n      const computedStyle = getComputedStyle(instance);\n      const value = (isCSSVariableName(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n      return typeof value === \"string\" ? value.trim() : value;\n    }\n  }\n\n  measureInstanceViewportBox(instance, _ref) {\n    let {\n      transformPagePoint\n    } = _ref;\n    return measureViewportBox(instance, transformPagePoint);\n  }\n\n  build(renderState, latestValues, props) {\n    buildHTMLStyles(renderState, latestValues, props.transformTemplate);\n  }\n\n  scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n    return scrapeMotionValuesFromProps(props, prevProps, visualElement);\n  }\n\n}\n\nexport { HTMLVisualElement, getComputedStyle };","map":{"version":3,"mappings":";;;;;;;;;AAmBM,SAAUA,gBAAV,CAA2BC,OAA3B,EAA+C;EACjD,OAAOC,MAAM,CAACF,gBAAP,CAAwBC,OAAxB,CAAP;AACH;;AAEK,MAAOE,iBAAP,SAAiCC,gBAAjC,CAIL;EAJDC;;IAKI,KAAIC,IAAJ,GAAO,MAAP;IA4CA,KAAcC,cAAd,GAAiBC,UAAjB;EACH;;EA3CGC,qBAAqB,CACjBC,QADiB,EAEjBC,GAFiB,EAEN;IAEX,IAAIC,cAAc,CAACC,GAAf,CAAmBF,GAAnB,CAAJ,EAA6B;MACzB,OAAO,KAAKG,UAAL,EAAiBC,YAAjB,GACDC,qBAAqB,CAACL,GAAD,CADpB,GAEDM,kBAAkB,CAACP,QAAD,EAAWC,GAAX,CAFxB;IAGH,CAJD,MAIO;MACH,MAAMO,aAAa,GAAGlB,gBAAgB,CAACU,QAAD,CAAtC;MACA,MAAMS,KAAK,GACP,CAACC,iBAAiB,CAACT,GAAD,CAAjB,GACKO,aAAa,CAACG,gBAAd,CAA+BV,GAA/B,CADL,GAEKO,aAAa,CAACP,GAAD,CAFnB,KAE2D,CAH/D;MAKA,OAAO,OAAOQ,KAAP,KAAiB,QAAjB,GAA4BA,KAAK,CAACG,IAAN,EAA5B,GAA4CH,KAAnD;IACH;EACJ;;EAEDI,0BAA0B,CACtBb,QADsB,QAEuD;IAAA,IAA7E;MAAEc;IAAF,CAA6E;IAE7E,OAAOC,kBAAkB,CAACf,QAAD,EAAWc,kBAAX,CAAzB;EACH;;EAEDE,KAAK,CACDC,WADC,EAEDC,YAFC,EAGDC,KAHC,EAGuB;IAExBC,eAAe,CAACH,WAAD,EAAcC,YAAd,EAA4BC,KAAK,CAACE,iBAAlC,CAAf;EACH;;EAEDC,2BAA2B,CACvBH,KADuB,EAEvBI,SAFuB,EAGvBC,aAHuB,EAGK;IAE5B,OAAOF,2BAA2B,CAACH,KAAD,EAAQI,SAAR,EAAmBC,aAAnB,CAAlC;EACH;;AA3CJ","names":["getComputedStyle","element","window","HTMLVisualElement","DOMVisualElement","constructor","type","renderInstance","renderHTML","readValueFromInstance","instance","key","transformProps","has","projection","isProjecting","defaultTransformValue","readTransformValue","computedStyle","value","isCSSVariableName","getPropertyValue","trim","measureInstanceViewportBox","transformPagePoint","measureViewportBox","build","renderState","latestValues","props","buildHTMLStyles","transformTemplate","scrapeMotionValuesFromProps","prevProps","visualElement"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\render\\html\\HTMLVisualElement.ts"],"sourcesContent":["import type { Box } from \"motion-utils\"\nimport type { AnyResolvedKeyframe } from \"../../animation/types\"\nimport { isCSSVariableName } from \"../../animation/utils/is-css-variable\"\nimport type { MotionNodeOptions } from \"../../node/types\"\nimport { transformProps } from \"../utils/keys-transform\"\nimport {\n    defaultTransformValue,\n    readTransformValue,\n} from \"../dom/parse-transform\"\nimport { measureViewportBox } from \"../../projection/utils/measure\"\nimport { DOMVisualElement } from \"../dom/DOMVisualElement\"\nimport type { DOMVisualElementOptions } from \"../dom/types\"\nimport type { ResolvedValues, MotionConfigContextProps } from \"../types\"\nimport type { VisualElement } from \"../VisualElement\"\nimport { HTMLRenderState } from \"./types\"\nimport { buildHTMLStyles } from \"./utils/build-styles\"\nimport { renderHTML } from \"./utils/render\"\nimport { scrapeMotionValuesFromProps } from \"./utils/scrape-motion-values\"\n\nexport function getComputedStyle(element: HTMLElement) {\n    return window.getComputedStyle(element)\n}\n\nexport class HTMLVisualElement extends DOMVisualElement<\n    HTMLElement,\n    HTMLRenderState,\n    DOMVisualElementOptions\n> {\n    type = \"html\"\n\n    readValueFromInstance(\n        instance: HTMLElement,\n        key: string\n    ): AnyResolvedKeyframe | null | undefined {\n        if (transformProps.has(key)) {\n            return this.projection?.isProjecting\n                ? defaultTransformValue(key)\n                : readTransformValue(instance, key)\n        } else {\n            const computedStyle = getComputedStyle(instance)\n            const value =\n                (isCSSVariableName(key)\n                    ? computedStyle.getPropertyValue(key)\n                    : computedStyle[key as keyof typeof computedStyle]) || 0\n\n            return typeof value === \"string\" ? value.trim() : (value as number)\n        }\n    }\n\n    measureInstanceViewportBox(\n        instance: HTMLElement,\n        { transformPagePoint }: MotionNodeOptions & Partial<MotionConfigContextProps>\n    ): Box {\n        return measureViewportBox(instance, transformPagePoint)\n    }\n\n    build(\n        renderState: HTMLRenderState,\n        latestValues: ResolvedValues,\n        props: MotionNodeOptions\n    ) {\n        buildHTMLStyles(renderState, latestValues, props.transformTemplate)\n    }\n\n    scrapeMotionValuesFromProps(\n        props: MotionNodeOptions,\n        prevProps: MotionNodeOptions,\n        visualElement: VisualElement\n    ) {\n        return scrapeMotionValuesFromProps(props, prevProps, visualElement)\n    }\n\n    renderInstance = renderHTML\n}\n"]},"metadata":{},"sourceType":"module"}