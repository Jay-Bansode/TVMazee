{"ast":null,"code":"import { frame, cancelFrame } from '../frameloop/frame.mjs';\n\nfunction observeTimeline(update, timeline) {\n  let prevProgress;\n\n  const onFrame = () => {\n    const {\n      currentTime\n    } = timeline;\n    const percentage = currentTime === null ? 0 : currentTime.value;\n    const progress = percentage / 100;\n\n    if (prevProgress !== progress) {\n      update(progress);\n    }\n\n    prevProgress = progress;\n  };\n\n  frame.preUpdate(onFrame, true);\n  return () => cancelFrame(onFrame);\n}\n\nexport { observeTimeline };","map":{"version":3,"mappings":";;AAKgB,yBAAgBA,MAAhB,EAAgCC,QAAhC,EAA0D;EACtE,IAAIC,YAAJ;;EAEA,MAAMC,OAAO,GAAG,MAAK;IACjB,MAAM;MAAEC;IAAF,IAAkBH,QAAxB;IACA,MAAMI,UAAU,GAAGD,WAAW,KAAK,IAAhB,GAAuB,CAAvB,GAA2BA,WAAW,CAACE,KAA1D;IACA,MAAMC,QAAQ,GAAGF,UAAU,GAAG,GAA9B;;IAEA,IAAIH,YAAY,KAAKK,QAArB,EAA+B;MAC3BP,MAAM,CAACO,QAAD,CAAN;IACH;;IAEDL,YAAY,GAAGK,QAAf;EACH,CAVD;;EAYAC,KAAK,CAACC,SAAN,CAAgBN,OAAhB,EAAyB,IAAzB;EAEA,OAAO,MAAMO,WAAW,CAACP,OAAD,CAAxB;AACJ","names":["update","timeline","prevProgress","onFrame","currentTime","percentage","value","progress","frame","preUpdate","cancelFrame"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\scroll\\observe.ts"],"sourcesContent":["import { ProgressTimeline } from \"../animation/types\"\nimport { cancelFrame, frame } from \"../frameloop\"\n\ntype Update = (progress: number) => void\n\nexport function observeTimeline(update: Update, timeline: ProgressTimeline) {\n    let prevProgress: number\n\n    const onFrame = () => {\n        const { currentTime } = timeline\n        const percentage = currentTime === null ? 0 : currentTime.value\n        const progress = percentage / 100\n\n        if (prevProgress !== progress) {\n            update(progress)\n        }\n\n        prevProgress = progress\n    }\n\n    frame.preUpdate(onFrame, true)\n\n    return () => cancelFrame(onFrame)\n}\n"]},"metadata":{},"sourceType":"module"}