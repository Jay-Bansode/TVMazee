{"ast":null,"code":"import { isSVGElement } from '../utils/is-svg-element.mjs';\nimport { resolveElements } from '../utils/resolve-elements.mjs';\nconst resizeHandlers = new WeakMap();\nlet observer;\n\nconst getSize = (borderBoxAxis, svgAxis, htmlAxis) => (target, borderBoxSize) => {\n  if (borderBoxSize && borderBoxSize[0]) {\n    return borderBoxSize[0][borderBoxAxis + \"Size\"];\n  } else if (isSVGElement(target) && \"getBBox\" in target) {\n    return target.getBBox()[svgAxis];\n  } else {\n    return target[htmlAxis];\n  }\n};\n\nconst getWidth = /*@__PURE__*/getSize(\"inline\", \"width\", \"offsetWidth\");\nconst getHeight = /*@__PURE__*/getSize(\"block\", \"height\", \"offsetHeight\");\n\nfunction notifyTarget(_ref) {\n  let {\n    target,\n    borderBoxSize\n  } = _ref;\n  resizeHandlers.get(target)?.forEach(handler => {\n    handler(target, {\n      get width() {\n        return getWidth(target, borderBoxSize);\n      },\n\n      get height() {\n        return getHeight(target, borderBoxSize);\n      }\n\n    });\n  });\n}\n\nfunction notifyAll(entries) {\n  entries.forEach(notifyTarget);\n}\n\nfunction createResizeObserver() {\n  if (typeof ResizeObserver === \"undefined\") return;\n  observer = new ResizeObserver(notifyAll);\n}\n\nfunction resizeElement(target, handler) {\n  if (!observer) createResizeObserver();\n  const elements = resolveElements(target);\n  elements.forEach(element => {\n    let elementHandlers = resizeHandlers.get(element);\n\n    if (!elementHandlers) {\n      elementHandlers = new Set();\n      resizeHandlers.set(element, elementHandlers);\n    }\n\n    elementHandlers.add(handler);\n    observer?.observe(element);\n  });\n  return () => {\n    elements.forEach(element => {\n      const elementHandlers = resizeHandlers.get(element);\n      elementHandlers?.delete(handler);\n\n      if (!elementHandlers?.size) {\n        observer?.unobserve(element);\n      }\n    });\n  };\n}\n\nexport { resizeElement };","map":{"version":3,"mappings":";;AAIA,MAAMA,cAAc,GAAG,IAAIC,OAAJ,EAAvB;AAEA,IAAIC,QAAJ;;AAEA,MAAMC,OAAO,GACT,CACIC,aADJ,EAEIC,OAFJ,EAGIC,QAHJ,KAKA,CAACC,MAAD,EAAkBC,aAAlB,KAAuE;EACnE,IAAIA,aAAa,IAAIA,aAAa,CAAC,CAAD,CAAlC,EAAuC;IACnC,OAAOA,aAAa,CAAC,CAAD,CAAb,CACFJ,aAAa,GAAG,MADd,CAAP;EAGH,CAJD,MAIO,IAAIK,YAAY,CAACF,MAAD,CAAZ,IAAwB,aAAaA,MAAzC,EAAiD;IACpD,OAAQA,MAA6B,CAACG,OAA9B,GAAwCL,OAAxC,CAAR;EACH,CAFM,MAEA;IACH,OAAQE,MAAsB,CAACD,QAAD,CAA9B;EACH;AACJ,CAhBL;;AAkBA,MAAMK,QAAQ,gBAAiBR,OAAO,CAAC,QAAD,EAAW,OAAX,EAAoB,aAApB,CAAtC;AACA,MAAMS,SAAS,gBAAiBT,OAAO,CAAC,OAAD,EAAU,QAAV,EAAoB,cAApB,CAAvC;;AAEA,SAASU,YAAT,OAAoE;EAAA,IAA9C;IAAEN,MAAF;IAAUC;EAAV,CAA8C;EAChER,cAAc,CAACc,GAAf,CAAmBP,MAAnB,GAA4BQ,OAA5B,CAAqCC,OAAD,IAAY;IAC5CA,OAAO,CAACT,MAAD,EAAS;MACZ,IAAIU,KAAJ,GAAS;QACL,OAAON,QAAQ,CAACJ,MAAD,EAASC,aAAT,CAAf;MACH,CAHW;;MAIZ,IAAIU,MAAJ,GAAU;QACN,OAAON,SAAS,CAACL,MAAD,EAASC,aAAT,CAAhB;MACH;;IANW,CAAT,CAAP;EAQH,CATD;AAUH;;AAED,SAASW,SAAT,CAAmBC,OAAnB,EAAiD;EAC7CA,OAAO,CAACL,OAAR,CAAgBF,YAAhB;AACH;;AAED,SAASQ,oBAAT,GAA6B;EACzB,IAAI,OAAOC,cAAP,KAA0B,WAA9B,EAA2C;EAE3CpB,QAAQ,GAAG,IAAIoB,cAAJ,CAAmBH,SAAnB,CAAX;AACH;;AAEe,uBACZZ,MADY,EAEZS,OAFY,EAEmB;EAE/B,IAAI,CAACd,QAAL,EAAemB,oBAAoB;EAEnC,MAAME,QAAQ,GAAGC,eAAe,CAACjB,MAAD,CAAhC;EAEAgB,QAAQ,CAACR,OAAT,CAAkBU,OAAD,IAAY;IACzB,IAAIC,eAAe,GAAG1B,cAAc,CAACc,GAAf,CAAmBW,OAAnB,CAAtB;;IAEA,IAAI,CAACC,eAAL,EAAsB;MAClBA,eAAe,GAAG,IAAIC,GAAJ,EAAlB;MACA3B,cAAc,CAAC4B,GAAf,CAAmBH,OAAnB,EAA4BC,eAA5B;IACH;;IAEDA,eAAe,CAACG,GAAhB,CAAoBb,OAApB;IACAd,QAAQ,EAAE4B,OAAV,CAAkBL,OAAlB;EACH,CAVD;EAYA,OAAO,MAAK;IACRF,QAAQ,CAACR,OAAT,CAAkBU,OAAD,IAAY;MACzB,MAAMC,eAAe,GAAG1B,cAAc,CAACc,GAAf,CAAmBW,OAAnB,CAAxB;MAEAC,eAAe,EAAEK,MAAjB,CAAwBf,OAAxB;;MAEA,IAAI,CAACU,eAAe,EAAEM,IAAtB,EAA4B;QACxB9B,QAAQ,EAAE+B,SAAV,CAAoBR,OAApB;MACH;IACJ,CARD;EASH,CAVD;AAWJ","names":["resizeHandlers","WeakMap","observer","getSize","borderBoxAxis","svgAxis","htmlAxis","target","borderBoxSize","isSVGElement","getBBox","getWidth","getHeight","notifyTarget","get","forEach","handler","width","height","notifyAll","entries","createResizeObserver","ResizeObserver","elements","resolveElements","element","elementHandlers","Set","set","add","observe","delete","size","unobserve"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\resize\\handle-element.ts"],"sourcesContent":["import { isSVGElement } from \"../utils/is-svg-element\"\nimport { ElementOrSelector, resolveElements } from \"../utils/resolve-elements\"\nimport { ResizeHandler } from \"./types\"\n\nconst resizeHandlers = new WeakMap<Element, Set<ResizeHandler<Element>>>()\n\nlet observer: ResizeObserver | undefined\n\nconst getSize =\n    (\n        borderBoxAxis: \"inline\" | \"block\",\n        svgAxis: \"width\" | \"height\",\n        htmlAxis: \"offsetWidth\" | \"offsetHeight\"\n    ) =>\n    (target: Element, borderBoxSize?: ReadonlyArray<ResizeObserverSize>) => {\n        if (borderBoxSize && borderBoxSize[0]) {\n            return borderBoxSize[0][\n                (borderBoxAxis + \"Size\") as keyof ResizeObserverSize\n            ]\n        } else if (isSVGElement(target) && \"getBBox\" in target) {\n            return (target as SVGGraphicsElement).getBBox()[svgAxis]\n        } else {\n            return (target as HTMLElement)[htmlAxis]\n        }\n    }\n\nconst getWidth = /*@__PURE__*/ getSize(\"inline\", \"width\", \"offsetWidth\")\nconst getHeight = /*@__PURE__*/ getSize(\"block\", \"height\", \"offsetHeight\")\n\nfunction notifyTarget({ target, borderBoxSize }: ResizeObserverEntry) {\n    resizeHandlers.get(target)?.forEach((handler) => {\n        handler(target, {\n            get width() {\n                return getWidth(target, borderBoxSize)\n            },\n            get height() {\n                return getHeight(target, borderBoxSize)\n            },\n        })\n    })\n}\n\nfunction notifyAll(entries: ResizeObserverEntry[]) {\n    entries.forEach(notifyTarget)\n}\n\nfunction createResizeObserver() {\n    if (typeof ResizeObserver === \"undefined\") return\n\n    observer = new ResizeObserver(notifyAll)\n}\n\nexport function resizeElement(\n    target: ElementOrSelector,\n    handler: ResizeHandler<Element>\n) {\n    if (!observer) createResizeObserver()\n\n    const elements = resolveElements(target)\n\n    elements.forEach((element) => {\n        let elementHandlers = resizeHandlers.get(element)\n\n        if (!elementHandlers) {\n            elementHandlers = new Set()\n            resizeHandlers.set(element, elementHandlers)\n        }\n\n        elementHandlers.add(handler)\n        observer?.observe(element)\n    })\n\n    return () => {\n        elements.forEach((element) => {\n            const elementHandlers = resizeHandlers.get(element)\n\n            elementHandlers?.delete(handler)\n\n            if (!elementHandlers?.size) {\n                observer?.unobserve(element)\n            }\n        })\n    }\n}\n"]},"metadata":{},"sourceType":"module"}