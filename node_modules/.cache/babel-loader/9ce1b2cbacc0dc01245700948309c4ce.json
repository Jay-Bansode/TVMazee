{"ast":null,"code":"import { px } from '../../value/types/numbers/units.mjs';\n\nfunction pixelsToPercent(pixels, axis) {\n  if (axis.max === axis.min) return 0;\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\n\n\nconst correctBorderRadius = {\n  correct: (latest, node) => {\n    if (!node.target) return latest;\n    /**\n     * If latest is a string, if it's a percentage we can return immediately as it's\n     * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n     */\n\n    if (typeof latest === \"string\") {\n      if (px.test(latest)) {\n        latest = parseFloat(latest);\n      } else {\n        return latest;\n      }\n    }\n    /**\n     * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n     * pixel value as a percentage of each axis\n     */\n\n\n    const x = pixelsToPercent(latest, node.target.x);\n    const y = pixelsToPercent(latest, node.target.y);\n    return `${x}% ${y}%`;\n  }\n};\nexport { correctBorderRadius, pixelsToPercent };","map":{"version":3,"mappings":";;AAIgB,yBAAgBA,MAAhB,EAAgCC,IAAhC,EAA0C;EACtD,IAAIA,IAAI,CAACC,GAAL,KAAaD,IAAI,CAACE,GAAtB,EAA2B,OAAO,CAAP;EAC3B,OAAQH,MAAM,IAAIC,IAAI,CAACC,GAAL,GAAWD,IAAI,CAACE,GAApB,CAAP,GAAmC,GAA1C;AACH;AAED;;;;;;AAMG;;;AACU,yBAAmB,GAA6B;EACzDC,OAAO,EAAE,CAACC,MAAD,EAASC,IAAT,KAAiB;IACtB,IAAI,CAACA,IAAI,CAACC,MAAV,EAAkB,OAAOF,MAAP;IAElB;;;AAGG;;IACH,IAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;MAC5B,IAAIG,EAAE,CAACC,IAAH,CAAQJ,MAAR,CAAJ,EAAqB;QACjBA,MAAM,GAAGK,UAAU,CAACL,MAAD,CAAnB;MACH,CAFD,MAEO;QACH,OAAOA,MAAP;MACH;IACJ;IAED;;;AAGG;;;IACH,MAAMM,CAAC,GAAGC,eAAe,CAACP,MAAD,EAASC,IAAI,CAACC,MAAL,CAAYI,CAArB,CAAzB;IACA,MAAME,CAAC,GAAGD,eAAe,CAACP,MAAD,EAASC,IAAI,CAACC,MAAL,CAAYM,CAArB,CAAzB;IAEA,OAAU,IAAM,MAAC,GAAjB;EACH;AAxBwD,CAAhD","names":["pixels","axis","max","min","correct","latest","node","target","px","test","parseFloat","x","pixelsToPercent","y"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\projection\\styles\\scale-border-radius.ts"],"sourcesContent":["import { px } from \"../../value/types/numbers/units\"\nimport type { Axis } from \"motion-utils\"\nimport type { ScaleCorrectorDefinition } from \"./types\"\n\nexport function pixelsToPercent(pixels: number, axis: Axis): number {\n    if (axis.max === axis.min) return 0\n    return (pixels / (axis.max - axis.min)) * 100\n}\n\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nexport const correctBorderRadius: ScaleCorrectorDefinition = {\n    correct: (latest, node) => {\n        if (!node.target) return latest\n\n        /**\n         * If latest is a string, if it's a percentage we can return immediately as it's\n         * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n         */\n        if (typeof latest === \"string\") {\n            if (px.test(latest)) {\n                latest = parseFloat(latest)\n            } else {\n                return latest\n            }\n        }\n\n        /**\n         * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n         * pixel value as a percentage of each axis\n         */\n        const x = pixelsToPercent(latest, node.target.x)\n        const y = pixelsToPercent(latest, node.target.y)\n\n        return `${x}% ${y}%`\n    },\n}\n"]},"metadata":{},"sourceType":"module"}