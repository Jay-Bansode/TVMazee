{"ast":null,"code":"import { isCSSVar } from '../../render/dom/is-css-var.mjs';\nimport { transformProps } from '../../render/utils/keys-transform.mjs';\nimport { isHTMLElement } from '../../utils/is-html-element.mjs';\nimport { MotionValue } from '../../value/index.mjs';\nimport { createSelectorEffect } from '../utils/create-dom-effect.mjs';\nimport { createEffect } from '../utils/create-effect.mjs';\nimport { buildTransform } from './transform.mjs';\nconst originProps = new Set([\"originX\", \"originY\", \"originZ\"]);\n\nconst addStyleValue = (element, state, key, value) => {\n  let render = undefined;\n  let computed = undefined;\n\n  if (transformProps.has(key)) {\n    if (!state.get(\"transform\")) {\n      // If this is an HTML element, we need to set the transform-box to fill-box\n      // to normalise the transform relative to the element's bounding box\n      if (!isHTMLElement(element) && !state.get(\"transformBox\")) {\n        addStyleValue(element, state, \"transformBox\", new MotionValue(\"fill-box\"));\n      }\n\n      state.set(\"transform\", new MotionValue(\"none\"), () => {\n        element.style.transform = buildTransform(state);\n      });\n    }\n\n    computed = state.get(\"transform\");\n  } else if (originProps.has(key)) {\n    if (!state.get(\"transformOrigin\")) {\n      state.set(\"transformOrigin\", new MotionValue(\"\"), () => {\n        const originX = state.latest.originX ?? \"50%\";\n        const originY = state.latest.originY ?? \"50%\";\n        const originZ = state.latest.originZ ?? 0;\n        element.style.transformOrigin = `${originX} ${originY} ${originZ}`;\n      });\n    }\n\n    computed = state.get(\"transformOrigin\");\n  } else if (isCSSVar(key)) {\n    render = () => {\n      element.style.setProperty(key, state.latest[key]);\n    };\n  } else {\n    render = () => {\n      element.style[key] = state.latest[key];\n    };\n  }\n\n  return state.set(key, value, render, computed);\n};\n\nconst styleEffect = /*@__PURE__*/createSelectorEffect( /*@__PURE__*/createEffect(addStyleValue));\nexport { addStyleValue, styleEffect };","map":{"version":3,"mappings":";;;;;;;AASA,MAAMA,WAAW,GAAG,IAAIC,GAAJ,CAAQ,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,CAAR,CAApB;;AAEO,MAAMC,aAAa,GAAG,CACzBC,OADyB,EAEzBC,KAFyB,EAGzBC,GAHyB,EAIzBC,KAJyB,KAKzB;EACA,IAAIC,MAAM,GAA6BC,SAAvC;EACA,IAAIC,QAAQ,GAA4BD,SAAxC;;EAEA,IAAIE,cAAc,CAACC,GAAf,CAAmBN,GAAnB,CAAJ,EAA6B;IACzB,IAAI,CAACD,KAAK,CAACQ,GAAN,CAAU,WAAV,CAAL,EAA6B;;;MAGzB,IAAI,CAACC,aAAa,CAACV,OAAD,CAAd,IAA2B,CAACC,KAAK,CAACQ,GAAN,CAAU,cAAV,CAAhC,EAA2D;QACvDV,aAAa,CACTC,OADS,EAETC,KAFS,EAGT,cAHS,EAIT,IAAIU,WAAJ,CAAgB,UAAhB,CAJS,CAAb;MAMH;;MAEDV,KAAK,CAACW,GAAN,CAAU,WAAV,EAAuB,IAAID,WAAJ,CAAgB,MAAhB,CAAvB,EAAgD,MAAK;QACjDX,OAAO,CAACa,KAAR,CAAcC,SAAd,GAA0BC,cAAc,CAACd,KAAD,CAAxC;MACH,CAFD;IAGH;;IAEDK,QAAQ,GAAGL,KAAK,CAACQ,GAAN,CAAU,WAAV,CAAX;EACH,CAnBD,MAmBO,IAAIZ,WAAW,CAACW,GAAZ,CAAgBN,GAAhB,CAAJ,EAA0B;IAC7B,IAAI,CAACD,KAAK,CAACQ,GAAN,CAAU,iBAAV,CAAL,EAAmC;MAC/BR,KAAK,CAACW,GAAN,CAAU,iBAAV,EAA6B,IAAID,WAAJ,CAAgB,EAAhB,CAA7B,EAAkD,MAAK;QACnD,MAAMK,OAAO,GAAGf,KAAK,CAACgB,MAAN,CAAaD,OAAb,IAAwB,KAAxC;QACA,MAAME,OAAO,GAAGjB,KAAK,CAACgB,MAAN,CAAaC,OAAb,IAAwB,KAAxC;QACA,MAAMC,OAAO,GAAGlB,KAAK,CAACgB,MAAN,CAAaE,OAAb,IAAwB,CAAxC;QACAnB,OAAO,CAACa,KAAR,CAAcO,eAAd,GAAgC,GAAGJ,OAAO,IAAIE,OAAO,IAAIC,OAAO,EAAhE;MACH,CALD;IAMH;;IAEDb,QAAQ,GAAGL,KAAK,CAACQ,GAAN,CAAU,iBAAV,CAAX;EACH,CAXM,MAWA,IAAIY,QAAQ,CAACnB,GAAD,CAAZ,EAAmB;IACtBE,MAAM,GAAG,MAAK;MACVJ,OAAO,CAACa,KAAR,CAAcS,WAAd,CAA0BpB,GAA1B,EAA+BD,KAAK,CAACgB,MAAN,CAAaf,GAAb,CAA/B;IACH,CAFD;EAGH,CAJM,MAIA;IACHE,MAAM,GAAG,MAAK;MACVJ,OAAO,CAACa,KAAR,CAAcX,GAAd,IAA4BD,KAAK,CAACgB,MAAN,CAAaf,GAAb,CAA5B;IACH,CAFD;EAGH;;EAED,OAAOD,KAAK,CAACW,GAAN,CAAUV,GAAV,EAAeC,KAAf,EAAsBC,MAAtB,EAA8BE,QAA9B,CAAP;AACJ,CAlDO;;AAoDM,iBAAW,gBAAiBiB,oBAAoB,EACzD,aAAcC,YAAY,CAACzB,aAAD,CAD+B,CAAhD","names":["originProps","Set","addStyleValue","element","state","key","value","render","undefined","computed","transformProps","has","get","isHTMLElement","MotionValue","set","style","transform","buildTransform","originX","latest","originY","originZ","transformOrigin","isCSSVar","setProperty","createSelectorEffect","createEffect"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\effects\\style\\index.ts"],"sourcesContent":["import { isCSSVar } from \"../../render/dom/is-css-var\"\nimport { transformProps } from \"../../render/utils/keys-transform\"\nimport { isHTMLElement } from \"../../utils/is-html-element\"\nimport { MotionValue } from \"../../value\"\nimport { MotionValueState } from \"../MotionValueState\"\nimport { createSelectorEffect } from \"../utils/create-dom-effect\"\nimport { createEffect } from \"../utils/create-effect\"\nimport { buildTransform } from \"./transform\"\n\nconst originProps = new Set([\"originX\", \"originY\", \"originZ\"])\n\nexport const addStyleValue = (\n    element: HTMLElement | SVGElement,\n    state: MotionValueState,\n    key: string,\n    value: MotionValue\n) => {\n    let render: VoidFunction | undefined = undefined\n    let computed: MotionValue | undefined = undefined\n\n    if (transformProps.has(key)) {\n        if (!state.get(\"transform\")) {\n            // If this is an HTML element, we need to set the transform-box to fill-box\n            // to normalise the transform relative to the element's bounding box\n            if (!isHTMLElement(element) && !state.get(\"transformBox\")) {\n                addStyleValue(\n                    element,\n                    state,\n                    \"transformBox\",\n                    new MotionValue(\"fill-box\")\n                )\n            }\n\n            state.set(\"transform\", new MotionValue(\"none\"), () => {\n                element.style.transform = buildTransform(state)\n            })\n        }\n\n        computed = state.get(\"transform\")\n    } else if (originProps.has(key)) {\n        if (!state.get(\"transformOrigin\")) {\n            state.set(\"transformOrigin\", new MotionValue(\"\"), () => {\n                const originX = state.latest.originX ?? \"50%\"\n                const originY = state.latest.originY ?? \"50%\"\n                const originZ = state.latest.originZ ?? 0\n                element.style.transformOrigin = `${originX} ${originY} ${originZ}`\n            })\n        }\n\n        computed = state.get(\"transformOrigin\")\n    } else if (isCSSVar(key)) {\n        render = () => {\n            element.style.setProperty(key, state.latest[key] as string)\n        }\n    } else {\n        render = () => {\n            element.style[key as any] = state.latest[key] as string\n        }\n    }\n\n    return state.set(key, value, render, computed)\n}\n\nexport const styleEffect = /*@__PURE__*/ createSelectorEffect(\n    /*@__PURE__*/ createEffect(addStyleValue)\n)\n"]},"metadata":{},"sourceType":"module"}