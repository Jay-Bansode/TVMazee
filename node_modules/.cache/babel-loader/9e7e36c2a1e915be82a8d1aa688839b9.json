{"ast":null,"code":"import { cancelFrame, frame } from '../frameloop/frame.mjs';\n\nfunction subscribeValue(inputValues, outputValue, getLatest) {\n  const update = () => outputValue.set(getLatest());\n\n  const scheduleUpdate = () => frame.preRender(update, false, true);\n\n  const subscriptions = inputValues.map(v => v.on(\"change\", scheduleUpdate));\n  outputValue.on(\"destroy\", () => {\n    subscriptions.forEach(unsubscribe => unsubscribe());\n    cancelFrame(update);\n  });\n}\n\nexport { subscribeValue };","map":{"version":3,"mappings":";;SAGgBA,eACZC,aACAC,aACAC,WAAkB;EAElB,MAAMC,MAAM,GAAG,MAAMF,WAAW,CAACG,GAAZ,CAAgBF,SAAS,EAAzB,CAArB;;EACA,MAAMG,cAAc,GAAG,MAAMC,KAAK,CAACC,SAAN,CAAgBJ,MAAhB,EAAwB,KAAxB,EAA+B,IAA/B,CAA7B;;EAEA,MAAMK,aAAa,GAAGR,WAAW,CAACS,GAAZ,CAAiBC,CAAD,IAAOA,CAAC,CAACC,EAAF,CAAK,QAAL,EAAeN,cAAf,CAAvB,CAAtB;EAEAJ,WAAW,CAACU,EAAZ,CAAe,SAAf,EAA0B,MAAK;IAC3BH,aAAa,CAACI,OAAd,CAAuBC,WAAD,IAAiBA,WAAW,EAAlD;IACAC,WAAW,CAACX,MAAD,CAAX;EACH,CAHD;AAIJ","names":["subscribeValue","inputValues","outputValue","getLatest","update","set","scheduleUpdate","frame","preRender","subscriptions","map","v","on","forEach","unsubscribe","cancelFrame"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\value\\subscribe-value.ts"],"sourcesContent":["import { MotionValue } from \".\"\nimport { cancelFrame, frame } from \"../frameloop\"\n\nexport function subscribeValue<O>(\n    inputValues: MotionValue[],\n    outputValue: MotionValue<O>,\n    getLatest: () => O\n) {\n    const update = () => outputValue.set(getLatest())\n    const scheduleUpdate = () => frame.preRender(update, false, true)\n\n    const subscriptions = inputValues.map((v) => v.on(\"change\", scheduleUpdate))\n\n    outputValue.on(\"destroy\", () => {\n        subscriptions.forEach((unsubscribe) => unsubscribe())\n        cancelFrame(update)\n    })\n}\n"]},"metadata":{},"sourceType":"module"}