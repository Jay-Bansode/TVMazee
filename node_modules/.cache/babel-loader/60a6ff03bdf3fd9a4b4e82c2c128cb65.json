{"ast":null,"code":"import { mixNumber } from '../../utils/mix/number.mjs';\nconst SCALE_PRECISION = 0.0001;\nconst SCALE_MIN = 1 - SCALE_PRECISION;\nconst SCALE_MAX = 1 + SCALE_PRECISION;\nconst TRANSLATE_PRECISION = 0.01;\nconst TRANSLATE_MIN = 0 - TRANSLATE_PRECISION;\nconst TRANSLATE_MAX = 0 + TRANSLATE_PRECISION;\n\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\n\nfunction isNear(value, target, maxDistance) {\n  return Math.abs(value - target) <= maxDistance;\n}\n\nfunction calcAxisDelta(delta, source, target) {\n  let origin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.5;\n  delta.origin = origin;\n  delta.originPoint = mixNumber(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  delta.translate = mixNumber(target.min, target.max, delta.origin) - delta.originPoint;\n\n  if (delta.scale >= SCALE_MIN && delta.scale <= SCALE_MAX || isNaN(delta.scale)) {\n    delta.scale = 1.0;\n  }\n\n  if (delta.translate >= TRANSLATE_MIN && delta.translate <= TRANSLATE_MAX || isNaN(delta.translate)) {\n    delta.translate = 0.0;\n  }\n}\n\nfunction calcBoxDelta(delta, source, target, origin) {\n  calcAxisDelta(delta.x, source.x, target.x, origin ? origin.originX : undefined);\n  calcAxisDelta(delta.y, source.y, target.y, origin ? origin.originY : undefined);\n}\n\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\n\nfunction calcRelativeBox(target, relative, parent) {\n  calcRelativeAxis(target.x, relative.x, parent.x);\n  calcRelativeAxis(target.y, relative.y, parent.y);\n}\n\nfunction calcRelativeAxisPosition(target, layout, parent) {\n  target.min = layout.min - parent.min;\n  target.max = target.min + calcLength(layout);\n}\n\nfunction calcRelativePosition(target, layout, parent) {\n  calcRelativeAxisPosition(target.x, layout.x, parent.x);\n  calcRelativeAxisPosition(target.y, layout.y, parent.y);\n}\n\nexport { calcAxisDelta, calcBoxDelta, calcLength, calcRelativeAxis, calcRelativeAxisPosition, calcRelativeBox, calcRelativePosition, isNear };","map":{"version":3,"mappings":"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","names":["SCALE_PRECISION","SCALE_MIN","SCALE_MAX","TRANSLATE_PRECISION","TRANSLATE_MIN","TRANSLATE_MAX","calcLength","axis","max","min","isNear","value","target","maxDistance","Math","abs","calcAxisDelta","delta","source","origin","originPoint","mixNumber","scale","translate","isNaN","calcBoxDelta","x","originX","undefined","y","originY","calcRelativeAxis","relative","parent","calcRelativeBox","calcRelativeAxisPosition","layout","calcRelativePosition"],"sources":["C:\\Projects\\TVMazee\\node_modules\\motion-dom\\src\\projection\\geometry\\delta-calc.ts"],"sourcesContent":["import { Axis, AxisDelta, Box, Delta } from \"motion-utils\"\nimport { mixNumber } from \"../../utils/mix/number\"\nimport { ResolvedValues } from \"../../render/types\"\n\nconst SCALE_PRECISION = 0.0001\nconst SCALE_MIN = 1 - SCALE_PRECISION\nconst SCALE_MAX = 1 + SCALE_PRECISION\nconst TRANSLATE_PRECISION = 0.01\nconst TRANSLATE_MIN = 0 - TRANSLATE_PRECISION\nconst TRANSLATE_MAX = 0 + TRANSLATE_PRECISION\n\nexport function calcLength(axis: Axis) {\n    return axis.max - axis.min\n}\n\nexport function isNear(\n    value: number,\n    target: number,\n    maxDistance: number\n): boolean {\n    return Math.abs(value - target) <= maxDistance\n}\n\nexport function calcAxisDelta(\n    delta: AxisDelta,\n    source: Axis,\n    target: Axis,\n    origin: number = 0.5\n) {\n    delta.origin = origin\n    delta.originPoint = mixNumber(source.min, source.max, delta.origin)\n    delta.scale = calcLength(target) / calcLength(source)\n    delta.translate =\n        mixNumber(target.min, target.max, delta.origin) - delta.originPoint\n\n    if (\n        (delta.scale >= SCALE_MIN && delta.scale <= SCALE_MAX) ||\n        isNaN(delta.scale)\n    ) {\n        delta.scale = 1.0\n    }\n\n    if (\n        (delta.translate >= TRANSLATE_MIN &&\n            delta.translate <= TRANSLATE_MAX) ||\n        isNaN(delta.translate)\n    ) {\n        delta.translate = 0.0\n    }\n}\n\nexport function calcBoxDelta(\n    delta: Delta,\n    source: Box,\n    target: Box,\n    origin?: ResolvedValues\n): void {\n    calcAxisDelta(\n        delta.x,\n        source.x,\n        target.x,\n        origin ? (origin.originX as number) : undefined\n    )\n    calcAxisDelta(\n        delta.y,\n        source.y,\n        target.y,\n        origin ? (origin.originY as number) : undefined\n    )\n}\n\nexport function calcRelativeAxis(target: Axis, relative: Axis, parent: Axis) {\n    target.min = parent.min + relative.min\n    target.max = target.min + calcLength(relative)\n}\n\nexport function calcRelativeBox(target: Box, relative: Box, parent: Box) {\n    calcRelativeAxis(target.x, relative.x, parent.x)\n    calcRelativeAxis(target.y, relative.y, parent.y)\n}\n\nexport function calcRelativeAxisPosition(\n    target: Axis,\n    layout: Axis,\n    parent: Axis\n) {\n    target.min = layout.min - parent.min\n    target.max = target.min + calcLength(layout)\n}\n\nexport function calcRelativePosition(target: Box, layout: Box, parent: Box) {\n    calcRelativeAxisPosition(target.x, layout.x, parent.x)\n    calcRelativeAxisPosition(target.y, layout.y, parent.y)\n}\n"]},"metadata":{},"sourceType":"module"}