{"ast":null,"code":"import { motionValue, spring } from 'motion-dom';\nimport { createAnimationsFromSequence } from '../sequence/create.mjs';\nimport { animateSubject } from './subject.mjs';\n\nfunction animateSequence(sequence, options, scope) {\n  const animations = [];\n  /**\n   * Pre-process: replace function segments with MotionValue segments,\n   * subscribe callbacks immediately\n   */\n\n  const processedSequence = sequence.map(segment => {\n    if (Array.isArray(segment) && typeof segment[0] === \"function\") {\n      const callback = segment[0];\n      const mv = motionValue(0);\n      mv.on(\"change\", callback);\n\n      if (segment.length === 1) {\n        return [mv, [0, 1]];\n      } else if (segment.length === 2) {\n        return [mv, [0, 1], segment[1]];\n      } else {\n        return [mv, segment[1], segment[2]];\n      }\n    }\n\n    return segment;\n  });\n  const animationDefinitions = createAnimationsFromSequence(processedSequence, options, scope, {\n    spring\n  });\n  animationDefinitions.forEach((_ref, subject) => {\n    let {\n      keyframes,\n      transition\n    } = _ref;\n    animations.push(...animateSubject(subject, keyframes, transition));\n  });\n  return animations;\n}\n\nexport { animateSequence };","map":{"version":3,"mappings":";;;;SAUgBA,gBACZC,UACAC,SACAC,OAAsB;EAEtB,MAAMC,UAAU,GAAwC,EAAxD;EAEA;;;AAGG;;EACH,MAAMC,iBAAiB,GAAGJ,QAAQ,CAACK,GAAT,CAAcC,OAAD,IAAY;IAC/C,IAAIC,KAAK,CAACC,OAAN,CAAcF,OAAd,KAA0B,OAAOA,OAAO,CAAC,CAAD,CAAd,KAAsB,UAApD,EAAgE;MAC5D,MAAMG,QAAQ,GAAGH,OAAO,CAAC,CAAD,CAAxB;MACA,MAAMI,EAAE,GAAGC,WAAW,CAAC,CAAD,CAAtB;MACAD,EAAE,CAACE,EAAH,CAAM,QAAN,EAAgBH,QAAhB;;MAEA,IAAIH,OAAO,CAACO,MAAR,KAAmB,CAAvB,EAA0B;QACtB,OAAO,CAACH,EAAD,EAAK,CAAC,CAAD,EAAI,CAAJ,CAAL,CAAP;MACH,CAFD,MAEO,IAAIJ,OAAO,CAACO,MAAR,KAAmB,CAAvB,EAA0B;QAC7B,OAAO,CAACH,EAAD,EAAK,CAAC,CAAD,EAAI,CAAJ,CAAL,EAAaJ,OAAO,CAAC,CAAD,CAApB,CAAP;MACH,CAFM,MAEA;QACH,OAAO,CAACI,EAAD,EAAKJ,OAAO,CAAC,CAAD,CAAZ,EAAiBA,OAAO,CAAC,CAAD,CAAxB,CAAP;MACH;IACJ;;IACD,OAAOA,OAAP;EACH,CAfyB,CAA1B;EAiBA,MAAMQ,oBAAoB,GAAGC,4BAA4B,CACrDX,iBADqD,EAErDH,OAFqD,EAGrDC,KAHqD,EAIrD;IAAEc;EAAF,CAJqD,CAAzD;EAOAF,oBAAoB,CAACG,OAArB,CAA6B,OAA4BC,OAA5B,KAAuC;IAAA,IAAtC;MAAEC,SAAF;MAAaC;IAAb,CAAsC;IAChEjB,UAAU,CAACkB,IAAX,CAAgB,GAAGC,cAAc,CAACJ,OAAD,EAAUC,SAAV,EAAqBC,UAArB,CAAjC;EACH,CAFD;EAIA,OAAOjB,UAAP;AACJ","names":["animateSequence","sequence","options","scope","animations","processedSequence","map","segment","Array","isArray","callback","mv","motionValue","on","length","animationDefinitions","createAnimationsFromSequence","spring","forEach","subject","keyframes","transition","push","animateSubject"],"sources":["C:\\Projects\\TVMazee\\node_modules\\framer-motion\\src\\animation\\animate\\sequence.ts"],"sourcesContent":["import {\n    AnimationPlaybackControlsWithThen,\n    AnimationScope,\n    motionValue,\n    spring,\n} from \"motion-dom\"\nimport { createAnimationsFromSequence } from \"../sequence/create\"\nimport { AnimationSequence, SequenceOptions } from \"../sequence/types\"\nimport { animateSubject } from \"./subject\"\n\nexport function animateSequence(\n    sequence: AnimationSequence,\n    options?: SequenceOptions,\n    scope?: AnimationScope\n) {\n    const animations: AnimationPlaybackControlsWithThen[] = []\n\n    /**\n     * Pre-process: replace function segments with MotionValue segments,\n     * subscribe callbacks immediately\n     */\n    const processedSequence = sequence.map((segment) => {\n        if (Array.isArray(segment) && typeof segment[0] === \"function\") {\n            const callback = segment[0] as (value: any) => void\n            const mv = motionValue(0)\n            mv.on(\"change\", callback)\n\n            if (segment.length === 1) {\n                return [mv, [0, 1]] as any\n            } else if (segment.length === 2) {\n                return [mv, [0, 1], segment[1]] as any\n            } else {\n                return [mv, segment[1], segment[2]] as any\n            }\n        }\n        return segment\n    }) as AnimationSequence\n\n    const animationDefinitions = createAnimationsFromSequence(\n        processedSequence,\n        options,\n        scope,\n        { spring }\n    )\n\n    animationDefinitions.forEach(({ keyframes, transition }, subject) => {\n        animations.push(...animateSubject(subject, keyframes, transition))\n    })\n\n    return animations\n}\n"]},"metadata":{},"sourceType":"module"}